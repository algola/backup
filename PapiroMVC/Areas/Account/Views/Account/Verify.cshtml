@using PapiroMVC.Validation
@model PapiroMVC.Models.LoginModel

@{  
    string strings = "~/Areas/Account/Views/Account/Strings";
    ViewBag.Title = (string)HttpContext.GetLocalResourceObject(strings, "VerifyTitle");

    if (TempData["message"] == "Activated")
    {
        ViewBag.Message = @Html.T(strings, "VerifyActivated");
    }

    if (TempData["message"] == "JustActivated")
    {
        ViewBag.Message = @Html.T(strings, "VerifyJustActivated");
    }

    if (TempData["message"] == "Error")
    {
        ViewBag.Message = @Html.T(strings, "VerifyError");
    }          
}

        <div class="alert alert-info">
            <i class="icon-hand-right"></i>
            @ViewBag.Message
            <button class="close" data-dismiss="alert">
                <i class="icon-remove"></i>
            </button>
        </div>


<div class="container">
    <ul id="discussion">
        @if (TempData["message"] == "Activated")
        {   
            <li><strong>Inizializzazione del database in corso...attendere</strong></li>
        }
    </ul>
</div>


@if (TempData["message"] == "Activated" || TempData["message"] == "JustActivated")
{
    var model = new PapiroMVC.Models.LoginModel();
    
    @Html.Partial("_Login", model)
}
else
{
<p>
    <button type="button" class="btn default" onclick="Javascript:window.location.replace('@Url.Action("Index", "Home", new { Area = "" })');">
        <i class="icon-home"></i>
        @HttpContext.GetLocalResourceObject(strings, "Home")
    </button>
</p>        
}

@section title{
    @ViewBag.Title
}

@section description{
    @Html.T(strings, "TitleConfirmation")
}


@section specificPlugInStyle {
    <link rel="stylesheet" href="~/Content/acetheme/assets/css/ui.jqgrid.css" />
}

@section specificPluginScript {
    <script src="~/Content/acetheme/assets/js/jquery-ui.min.js"></script>
    <script src="~/Content/acetheme/assets/js/jquery.ui.touch-punch.min.js"></script>
}



@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")


    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.1.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
}

<script>
    $(function () {
        // Reference the auto-generated proxy for the hub.
        var chat = $.connection.chatHub;
        // Create a function that the hub can call back to display messages.
        chat.client.addNewMessageToPage = function (message) {
            // Add the message to the page.
            $('#discussion').append('<li><strong>' + htmlEncode(message) + '</strong></li>');
        };

        $.connection.hub.start().done(function () {

        
                });
    });

    // This optional function html-encodes messages for display in the page.
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }
</script>
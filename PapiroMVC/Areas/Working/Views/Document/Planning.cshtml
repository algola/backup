@using Mvc.HtmlHelpers
@using PapiroMVC.Validation
@using PapiroMVC.Models
@using System.Web.Script.Serialization
@model List<TaskCenter>


@{
    string strings = "~/Areas/Working/Views/Document/Strings";
    string stringsProd = "~/Views/Shared/Strings";

    //Prendo il titolo dal menù
    ViewBag.Title = Html.T(strings, "Planning");
}

<div class="row">

    <div class="col-xs-12">
        @{foreach (var item in Model)
        {
        <div class="col-xs-4 col-sm-3">
            @Html.Partial("_ListPlanning", item)
        </div>

        }
        }
    </div>


    <button class="btn btn-primary" type="button" onclick="save();">
        <i class="icon-home bigger-125"></i>
        @Html.T(strings, "Save")
    </button>

    <button class="btn btn-primary" type="button" onclick="clearFirst();">
        <i class="icon-home bigger-125"></i>
        @Html.T(strings, "ClearFirst")
    </button>

    <button class="btn btn-primary" type="button" onclick="clearLast();">
        <i class="icon-home bigger-125"></i>
        @Html.T(strings, "ClearLast")
    </button>


</div>

@section title{
    @Html.T(strings, "Documents")
}

@section description{
    @Html.T(strings, "DocumentsDesc")
}


@section specificPlugInStyle {
    <link rel="stylesheet" href="~/Content/acetheme/assets/css/datepicker.css" />

    <link href="~/Content/acetheme/assets/js/plugins/ui.multiselect.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/acetheme/assets/css/jquery-ui.min.css" />

    <link rel="stylesheet" href="~/Content/acetheme/assets/css/ui.jqgrid.css" />

}

@section specificPluginScript {
    <script src="~/Content/acetheme/assets/js/jquery-ui.min.js"></script>
    <script src="~/Content/acetheme/assets/js/date-time/bootstrap-datepicker.min.js"></script>
    <script src="~/Content/acetheme/assets/js/jqGrid/jquery.jqGrid.min.js"></script>
    <script src="~/Content/acetheme/assets/js/jqGrid/i18n/grid.locale-en.js"></script>
    <script src="~/Scripts/jqgridHelper.js"></script>
    <script type="text/javascript">
        $.jgrid.no_legacy_api = true;
        $.jgrid.useJSON = true;
    </script>
    <script src="~/Content/acetheme/assets/js/plugins/ui.multiselect.js"></script>
    <script src="~/Content/acetheme/assets/js/plugins/jquery.tablednd.js"></script>

}

@section ScriptS{
    @Scripts.Render("~/bundles/jqueryval")
}

<script>



    $(function () {
        document.getElementById("createEstimateSlidebar").className = "active open";

    });



    function clearFirst() {
        var url = '@Url.Action("ClearFirstTaskCenter", "Document", new { area = "Working" })';
        $.ajax({
            type: "GET",
            url: url,
            success: function (data) {
                alert(data.codTaskCenter);
                $("#list"+data.codTaskCenter).trigger("reloadGrid");
            }
        });
    }

    function clearLast() {
        var url = '@Url.Action("ClearLastTaskCenter", "Document", new { area = "Working"})';
        $.ajax({
            type: "GET",
            url: url,
            success: function (data) {
                alert(data.codTaskCenter);
                $("#list" + data.codTaskCenter).trigger("reloadGrid");
            }
        });
    }



</script>

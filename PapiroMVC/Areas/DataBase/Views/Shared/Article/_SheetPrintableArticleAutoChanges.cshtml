@using PapiroMVC.Validation
@using PapiroMVC.Models
@model PapiroMVC.Models.SheetPrintableArticleAutoChanges


@{
    
    string strings = "~/Areas/DataBase/Views/Article/Strings";
    
    ViewBag.ProcessCostType = new List<SelectListItem>
                {
                    new SelectListItem {Text = (string)HttpContext.GetLocalResourceObject(strings, "OptAllCost"), 
                        Value = SheetPrintableArticleAutoChanges.ProcessCostType.AllCost.ToString()},
                    new SelectListItem {Text = (string)HttpContext.GetLocalResourceObject(strings, "OptPaked"), 
                        Value = SheetPrintableArticleAutoChanges.ProcessCostType.PackedCost.ToString()},
                    new SelectListItem {Text = (string)HttpContext.GetLocalResourceObject(strings, "OptPallet"), 
                        Value = SheetPrintableArticleAutoChanges.ProcessCostType.PalletCost.ToString()}
                };

    ViewBag.ProcessNoBvType = new List<SelectListItem>
                {
                    new SelectListItem {Text = (string)HttpContext.GetLocalResourceObject(strings, "OptNoBvNoModify"), 
                        Value = SheetPrintableArticleAutoChanges.ProcessNoBvType.NoBvNoModify.ToString()},
                    new SelectListItem {Text = (string)HttpContext.GetLocalResourceObject(strings, "OptNoBvYes"), 
                        Value = SheetPrintableArticleAutoChanges.ProcessNoBvType.NoBvYes.ToString()},
                    new SelectListItem {Text = (string)HttpContext.GetLocalResourceObject(strings, "OptNoBvNo"), 
                        Value = SheetPrintableArticleAutoChanges.ProcessNoBvType.NoBvNo.ToString()}
                };
                
}


<!-- autocomplete works properly only if script is reloaded in partial view -->
<script src="/Scripts/autocomplete.js" type="text/javascript"></script>
 
@using (Ajax.BeginForm("SheetAutomaticallyChangesValidation", new { controller = "Article", area = "DataBase" }, new AjaxOptions
{
    HttpMethod = "POST",
//    UpdateTargetId = "sheetPrintableArticleAutoChanges",
//    InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace,
    OnSuccess = "sendSheetAutomaticallyChanges",
    OnFailure = "ReloadForm(xhr)"

}))
{          
        @Html.ValidationSummary(true)
    
    <fieldset>
        <legend>SheetPrintableArticleViewModelAutoChanges</legend>

            @Html.AlgolaAutocompleteFor(model => model.SupplierMaker, "SupplierBusinessNameAutoComplete", "CustomerSupplier", new { id = "SupplierMaker" })
            @Html.AlgolaAutocompleteFor(model => model.SupplyerBuy, "SupplierBusinessNameAutoComplete", "CustomerSupplier", new { id = "SupplyerBuy" })

            @Html.AlgolaAutocompleteFor(model => model.Hand, "HandAutoComplete", "Article", new { id = "Hand" })
<br />            
            @Html.AlgolaEditorFor(model => model.CostPerKg, new { id = "CostPerKg" })
            @Html.DropDownListFor(model=>model.TypeOfCostToModify, 
            ViewBag.ProcessCostType as IEnumerable<SelectListItem>,
            new { @style = "width: 255px;", 
                id = "optTypeOfCostToModify" 
            })
<br />  
<br />  
            @Html.LabelFor(model=>model.TypeOfNoBvToModify)
            @Html.DropDownListFor(model=>model.TypeOfNoBvToModify, 
            ViewBag.ProcessNoBvType as IEnumerable<SelectListItem>,
            new { @style = "width: 255px;", 
                id = "optTypeOfNoBvToModify" 
            })
<br />  

    </fieldset>
    
    <input type="submit" value="Elabora")' />
}
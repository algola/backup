@using PapiroMVC.Models.Resources.TypeOfTaskAndCodTypeOfTask
@using PapiroMVC.Validation
@model List<PapiroMVC.Models.TaskEstimatedOn>

@{
    string strings = "~/Areas/DataBase/Views/TaskExecutor/Strings";
    ViewBag.Title = (string)HttpContext.GetLocalResourceObject(strings, "TaskEstimatedOnRun");

    //we want ot use different resource only to share it between areas and parts
    string stringsCod = "~/Views/Shared/TypeOfTaskAndCodTypeOfTask";
}

<div id="status"> 

<h2>@ViewBag.Title</h2>

@Scripts.Render("~/bundles/jqueryval")
@using (Ajax.BeginForm("TaskEstimatedOnRun", "TaskExecutor", new AjaxOptions { UpdateTargetId = "status", OnBegin = "showProcessingMsg", OnComplete = "hideProcessingMsg", OnSuccess = "OnSuccess" }, new { @class = "form-horizontal" }))
{
    @Html.ValidationSummary(true)

    
        <div class="page-control" data-role="page-control">

            <span class="menu-pull"></span> 
            <div class="menu-pull-bar"></div>
            <!-- Tabs -->
            <ul>

                <!-- parts -->
                @for (int i = 0; i < Model.Count; i++)
                { 
                    if (i==0)
                    {                        
                        <li class="active"><a href="#frame1">@Html.T(stringsCod,"Cod" + Model[i].CodOptionTypeOfTask)</a></li>
                    }
                    else
                    {
                        <li><a href="#frame@((i + 1).ToString())">@Html.T(stringsCod,"Cod" + Model[i].CodOptionTypeOfTask)</a></li>
                    }
                }

            </ul>

            <!-- Tabs content -->
            <div class="frames">
                <!-- parts -->
                @for (int i = 0; i < Model.Count; i++)
                {
                    
                    ViewBag.IndexTaskEstimatedOn = i;
                                                            
                    if (i==0)
                    {
                    <div class="frame active" id="frame@((i+1).ToString())">
                        @Html.EditorFor(model => model[i])           
                    </div>
                    }             
                    else
                    {
                        <div class="frame" id="frame@((i+1).ToString())">
                        @Html.EditorFor(model => model[i])           
                    </div>

                    }
                }
            </div>
            
        </div>
         <br />   


            <p>
                <button type="button" onclick="Javascript:window.location.replace('@Url.Action((string)TempData["TaskExecutorIndex"], "TaskExecutor", new {Area="Database"})');">            
                    <i class="icon-arrow-left"></i>
                     @HttpContext.GetLocalResourceObject(strings, "Cancel")
                </button>                
                
                <button class="default" type="submit">
                    <i class="icon-save"></i>
                    @HttpContext.GetLocalResourceObject(strings, "Save")
                </button>  

            </p>}

    </div>


@section breadcrumb {

}

@section ScriptS{
    @Scripts.Render("~/bundles/jqueryval")
}